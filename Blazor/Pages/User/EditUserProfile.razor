@page "/user/profile/edit"
@using BlazorBootstrap
@attribute [Authorize]

<Preload LoadingText="Loading..." />

@if (_editInfoForm == null)
{

	<PageTitle>Create Profile</PageTitle>
	<div class="container">
		<div class="col-md-8">
			<Card>
				<CardHeader Class="align-self-center py-4">
					Profile Details Not Found
				</CardHeader>
				<CardBody>
					<CardTitle Class="d-flex justify-content-center mt-3">
						<h3>You don’t have a profile yet. Please create one to continue.</h3>
					</CardTitle>
				</CardBody>
				<div class="d-flex justify-content-center my-3">
					<Button To="/user/profile/create" Class="btn-custom main" Type="ButtonType.Link">
						Create Profile
					</Button>
				</div>
			</Card>
		</div>
	</div>
}
else
{
	<PageTitle>Edit Info</PageTitle>

	<div class="container">
		<div class="col-md-8">
			<Card>
				<CardBody>
					<CardHeader Class="mt-3 text-center fs-1">
						Edit your profile information, <div>@_editInfoForm?.FirstName @_editInfoForm?.LastName</div>
					</CardHeader>
					<CardText Class="text-center my-3 fs-5">
						Update your personal information below and click "Save Changes" to apply the updates.
					</CardText>
					<hr />
					<EditForm Model="@_editInfoForm" OnValidSubmit="HandleOnValidSubmit">
						<DataAnnotationsValidator />
						<ValidationSummary />

						<div class="floating-label">
							<label for="input-field-first-name">First Name * </label>
							<InputText @bind-Value="_editInfoForm.FirstName"
									   placeholder="First Name"
									   class="form-control"
									   id="input-field-first-name" />
						</div>

						<div class="floating-label">
							<label for="input-field-last-name">Last Name * </label>
							<InputText @bind-Value="_editInfoForm.LastName"
									   placeholder="Last Name"
									   class="form-control"
									   id="input-field-last-name" />
						</div>

						<div class="floating-label">
							<label for="input-field-date-of-birth">Date of Birth * </label>
							<InputDate @bind-Value="_editInfoForm.DateOfBirth"
									   placeholder="Date of Birth"
									   class="form-control"
									   id="input-field-date-of-birth" />
						</div>

						<div class="floating-label">
							<label for="input-field-address">Address * </label>
							<InputText @bind-Value="_editInfoForm.Address"
									   placeholder="Address"
									   class="form-control"
									   id="input-field-address" />
						</div>
						<div class="floating-label">
							<label for="input-field-city">City</label>
							<InputText @bind-Value="_editInfoForm.City"
									   placeholder="City"
									   class="form-control"
									   id="input-field-city" />
						</div>

						<div class="floating-label">
							<label for="input-field-postal-code">Postal Code *</label>
							<InputText @bind-Value="_editInfoForm.PostalCode"
									   placeholder="Postal Code"
									   class="form-control"
									   id="input-field-postal-code" />
						</div>

						<div class="floating-label">
							<label for="input-field-country">Country</label>
							<InputText @bind-Value="_editInfoForm.Country"
									   placeholder="Country"
									   class="form-control"
									   id="input-field-country" />
						</div>

						<div class="floating-label">
							<label for="input-field-phone-number">Phone Number *</label>
							<InputText @bind-Value="_editInfoForm.PhoneNumber"
									   placeholder="Phone Number"
									   class="form-control"
									   id="input-field-phone-number" />
						</div>

						<div class="floating-label">
							<label for="input-field-special-request">Special Requests</label>
							<InputTextArea @bind-Value="_editInfoForm.SpecialRequests"
										   placeholder="Special Requests"
										   class="form-control"
										   rows="4"
										   id="input-field-special-request" />
						</div>

						<div class="d-flex flex-column flex-sm-row align-items-center justify-content-around gap-2 gap-md-5">
							<Button type="ButtonType.Submit" Class="btn btn-custom">
								Save Changes
							</Button>
							<Button Type="ButtonType.Button" Class="btn btn-outline" @onclick="CancelEdit">
								Cancel
							</Button>
						</div>
					</EditForm>
				</CardBody>
			</Card>
		</div>
	</div>
}